Perfecto. Ya que tienes acceso como **root**, aquÃ­ tienes las instrucciones completas para instalar y configurar Kubernetes (usando **K3s**) en tu VPS **como root**, y dejarlo listo para integrarse con GitHub Actions. Vamos directo al grano ğŸ‘‡

---

## âœ… 1. INSTALAR K3s COMO ROOT (Kubernetes simplificado)

```bash
curl -sfL https://get.k3s.io | sh -
```

Esto instalarÃ¡:

* Un clÃºster de un solo nodo (servidor).
* `kubectl`, `k3s`, y todo lo necesario.
* El archivo `kubeconfig` en: `/etc/rancher/k3s/k3s.yaml`

âœ… Espera unos segundos tras la instalaciÃ³n. Puedes verificar que estÃ© corriendo con:

```bash
k3s kubectl get nodes
```

---

## âœ… 2. COPIAR kubeconfig PARA USAR FUERA DEL VPS

1. **Copia el archivo de configuraciÃ³n:**

```bash
mkdir -p ~/.kube
cp /etc/rancher/k3s/k3s.yaml ~/.kube/config
```

2. **Ajusta el endpoint del servidor (si lo vas a usar desde otro equipo):**

Edita el archivo `~/.kube/config` y cambia esta lÃ­nea:

```yaml
server: https://127.0.0.1:6443
```

ğŸ” Por tu IP pÃºblica (ejemplo):

```yaml
server: https://TU_IP_PUBLICA:6443
```

> âš ï¸ Esto solo es necesario si vas a conectarte al clÃºster **desde tu PC**. Si todo ocurre en el VPS (como despliegue desde GitHub hacia el VPS), puedes dejarlo como estÃ¡.

---

## âœ… 3. GENERAR CONTENIDO BASE64 PARA `KUBE_CONFIG`

```bash
cat ~/.kube/config | base64 -w 0
```

ğŸ“‹ Copia **todo el resultado** (Â¡es una lÃ­nea muy larga!).

> Si estÃ¡s en macOS localmente y haces esto desde ahÃ­, usa `base64` sin `-w 0`.

---

## âœ… 4. CREAR EL SECRETO EN GITHUB ACTIONS

1. Ve a tu repositorio en GitHub.
2. Entra en:
   `Settings > Secrets and variables > Actions`
3. Haz clic en **â€œNew repository secretâ€**
4. Crea uno con:

| Nombre        | Valor (lo que copiaste) |
| ------------- | ----------------------- |
| `KUBE_CONFIG` | `<contenido base64>`    |

---

## âœ… 5. USAR EL SECRETO EN TU WORKFLOW

En tu GitHub Actions (`.github/workflows/deploy.yml` o similar), aÃ±ade esto:

```yaml
- name: Set up kubeconfig
  run: |
    mkdir -p $HOME/.kube
    echo "${{ secrets.KUBE_CONFIG }}" | base64 -d > $HOME/.kube/config
```

Luego puedes usar:

```yaml
- name: Verificar conexiÃ³n al clÃºster
  run: kubectl get nodes
```

---

## âœ… Â¿QuÃ© sigue?

Ahora puedes:

* Crear tus archivos YAML de Kubernetes: `deployment.yaml`, `service.yaml`, etc.
* Hacer que tu workflow los aplique asÃ­:

```yaml
- name: Desplegar backend
  run: kubectl apply -f k8s/deployment.yaml
```

---

Â¿Quieres que te cree esos archivos YAML para desplegar tu backend con una imagen de DockerHub (`streamcast-backend:latest`) y lo conecte a un puerto, con o sin LoadBalancer?
